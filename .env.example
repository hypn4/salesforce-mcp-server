# Salesforce MCP Server Configuration
# =====================================

# ============================================
# OAuth Mode
# ============================================
# Authentication mode for HTTP transport:
# - bearer: Clients handle OAuth, server validates Bearer tokens (default)
# - proxy: Server acts as OAuth 2.1 + PKCE proxy to Salesforce
OAUTH_MODE=bearer

# ============================================
# HTTP Server Settings
# ============================================
# Port for HTTP server (streamable-http mode)
FASTMCP_PORT=8000

# Base URL for OAuth callbacks (required for proxy mode)
# Must match your deployment URL and be registered in Salesforce Connected App
BASE_URL=http://localhost:8000

# ============================================
# Salesforce OAuth (Required for proxy mode)
# ============================================
# Connected App client ID (required)
SALESFORCE_CLIENT_ID=your_connected_app_client_id

# Client secret (optional - determines authentication mode)
# - Set this for Confidential Client mode (more secure, requires secret)
# - Leave empty/unset for PKCE-only mode (Public Client, no secret needed)
#
# For PKCE-only mode, configure your Salesforce Connected App:
#   - Enable: "Require Proof Key for Code Exchange (PKCE)"
#   - Disable: "Require Secret for Web Server Flow"
SALESFORCE_CLIENT_SECRET=

# Required scopes (comma-separated)
OAUTH_REQUIRED_SCOPES=api,refresh_token

# OAuth callback redirect path (default: /auth/callback)
# Must match the callback URL registered in Salesforce Connected App
OAUTH_REDIRECT_PATH=/auth/callback

# ============================================
# Salesforce Instance
# ============================================
# Login URL (authorization server)
# - Production: https://login.salesforce.com
# - Sandbox: https://test.salesforce.com
SALESFORCE_LOGIN_URL=https://login.salesforce.com

# Instance URL for API calls and token verification
# - Production: https://login.salesforce.com
# - Sandbox: https://test.salesforce.com
# - Custom domain: https://your-domain.my.salesforce.com
SALESFORCE_INSTANCE_URL=https://login.salesforce.com

# ============================================
# OAuth Storage Configuration
# ============================================
# Storage type for OAuth client data
# - memory: In-memory storage (default, fast, data lost on restart)
# - redis: Redis storage (persistent, supports distributed deployments)
OAUTH_STORAGE_TYPE=memory

# Redis connection URL (required if OAUTH_STORAGE_TYPE=redis)
REDIS_URL=redis://localhost:6379

# Fernet encryption key for encrypting stored OAuth data (optional)
# Generate with:
#   python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#   openssl rand -base64 32
STORAGE_ENCRYPTION_KEY=

# ============================================
# Logging
# ============================================
# Valid levels: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
